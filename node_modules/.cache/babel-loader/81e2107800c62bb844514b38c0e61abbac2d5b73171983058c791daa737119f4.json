{"ast":null,"code":"/*\r\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\r\n *\r\n *  Use of this source code is governed by a BSD-style license\r\n *  that can be found in the LICENSE file in the root of the source\r\n *  tree.\r\n */\n/* eslint-env node */\n'use strict';\n\nimport * as utils from '../utils';\nexport function shimGetUserMedia(window, browserDetails) {\n  var navigator = window && window.navigator;\n  var MediaStreamTrack = window && window.MediaStreamTrack;\n  navigator.getUserMedia = function (constraints, onSuccess, onError) {\n    // Replace Firefox 44+'s deprecation warning with unprefixed version.\n    utils.deprecated('navigator.getUserMedia', 'navigator.mediaDevices.getUserMedia');\n    navigator.mediaDevices.getUserMedia(constraints).then(onSuccess, onError);\n  };\n  if (!(browserDetails.version > 55 && 'autoGainControl' in navigator.mediaDevices.getSupportedConstraints())) {\n    var remap = function remap(obj, a, b) {\n      if (a in obj && !(b in obj)) {\n        obj[b] = obj[a];\n        delete obj[a];\n      }\n    };\n    var nativeGetUserMedia = navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function (c) {\n      if (typeof c === 'object' && typeof c.audio === 'object') {\n        c = JSON.parse(JSON.stringify(c));\n        remap(c.audio, 'autoGainControl', 'mozAutoGainControl');\n        remap(c.audio, 'noiseSuppression', 'mozNoiseSuppression');\n      }\n      return nativeGetUserMedia(c);\n    };\n    if (MediaStreamTrack && MediaStreamTrack.prototype.getSettings) {\n      var nativeGetSettings = MediaStreamTrack.prototype.getSettings;\n      MediaStreamTrack.prototype.getSettings = function () {\n        var obj = nativeGetSettings.apply(this, arguments);\n        remap(obj, 'mozAutoGainControl', 'autoGainControl');\n        remap(obj, 'mozNoiseSuppression', 'noiseSuppression');\n        return obj;\n      };\n    }\n    if (MediaStreamTrack && MediaStreamTrack.prototype.applyConstraints) {\n      var nativeApplyConstraints = MediaStreamTrack.prototype.applyConstraints;\n      MediaStreamTrack.prototype.applyConstraints = function (c) {\n        if (this.kind === 'audio' && typeof c === 'object') {\n          c = JSON.parse(JSON.stringify(c));\n          remap(c, 'autoGainControl', 'mozAutoGainControl');\n          remap(c, 'noiseSuppression', 'mozNoiseSuppression');\n        }\n        return nativeApplyConstraints.apply(this, [c]);\n      };\n    }\n  }\n}","map":{"version":3,"names":["utils","shimGetUserMedia","window","browserDetails","navigator","MediaStreamTrack","getUserMedia","constraints","onSuccess","onError","deprecated","mediaDevices","then","version","getSupportedConstraints","remap","obj","a","b","nativeGetUserMedia","bind","c","audio","JSON","parse","stringify","prototype","getSettings","nativeGetSettings","apply","arguments","applyConstraints","nativeApplyConstraints","kind"],"sources":["C:/Users/cnsi-3f-1/Desktop/React/rtsp_to_web/node_modules/webrtc-adapter/src/js/firefox/getusermedia.js"],"sourcesContent":["/*\r\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\r\n *\r\n *  Use of this source code is governed by a BSD-style license\r\n *  that can be found in the LICENSE file in the root of the source\r\n *  tree.\r\n */\r\n/* eslint-env node */\r\n'use strict';\r\n\r\nimport * as utils from '../utils';\r\n\r\nexport function shimGetUserMedia(window, browserDetails) {\r\n  const navigator = window && window.navigator;\r\n  const MediaStreamTrack = window && window.MediaStreamTrack;\r\n\r\n  navigator.getUserMedia = function(constraints, onSuccess, onError) {\r\n    // Replace Firefox 44+'s deprecation warning with unprefixed version.\r\n    utils.deprecated('navigator.getUserMedia',\r\n        'navigator.mediaDevices.getUserMedia');\r\n    navigator.mediaDevices.getUserMedia(constraints).then(onSuccess, onError);\r\n  };\r\n\r\n  if (!(browserDetails.version > 55 &&\r\n      'autoGainControl' in navigator.mediaDevices.getSupportedConstraints())) {\r\n    const remap = function(obj, a, b) {\r\n      if (a in obj && !(b in obj)) {\r\n        obj[b] = obj[a];\r\n        delete obj[a];\r\n      }\r\n    };\r\n\r\n    const nativeGetUserMedia = navigator.mediaDevices.getUserMedia.\r\n        bind(navigator.mediaDevices);\r\n    navigator.mediaDevices.getUserMedia = function(c) {\r\n      if (typeof c === 'object' && typeof c.audio === 'object') {\r\n        c = JSON.parse(JSON.stringify(c));\r\n        remap(c.audio, 'autoGainControl', 'mozAutoGainControl');\r\n        remap(c.audio, 'noiseSuppression', 'mozNoiseSuppression');\r\n      }\r\n      return nativeGetUserMedia(c);\r\n    };\r\n\r\n    if (MediaStreamTrack && MediaStreamTrack.prototype.getSettings) {\r\n      const nativeGetSettings = MediaStreamTrack.prototype.getSettings;\r\n      MediaStreamTrack.prototype.getSettings = function() {\r\n        const obj = nativeGetSettings.apply(this, arguments);\r\n        remap(obj, 'mozAutoGainControl', 'autoGainControl');\r\n        remap(obj, 'mozNoiseSuppression', 'noiseSuppression');\r\n        return obj;\r\n      };\r\n    }\r\n\r\n    if (MediaStreamTrack && MediaStreamTrack.prototype.applyConstraints) {\r\n      const nativeApplyConstraints =\r\n        MediaStreamTrack.prototype.applyConstraints;\r\n      MediaStreamTrack.prototype.applyConstraints = function(c) {\r\n        if (this.kind === 'audio' && typeof c === 'object') {\r\n          c = JSON.parse(JSON.stringify(c));\r\n          remap(c, 'autoGainControl', 'mozAutoGainControl');\r\n          remap(c, 'noiseSuppression', 'mozNoiseSuppression');\r\n        }\r\n        return nativeApplyConstraints.apply(this, [c]);\r\n      };\r\n    }\r\n  }\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}