{"ast":null,"code":"/*\r\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\r\n *\r\n *  Use of this source code is governed by a BSD-style license\r\n *  that can be found in the LICENSE file in the root of the source\r\n *  tree.\r\n */\n'use strict';\n\nimport * as utils from '../utils';\nexport function shimLocalStreamsAPI(window) {\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  if (!('getLocalStreams' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.getLocalStreams = function getLocalStreams() {\n      if (!this._localStreams) {\n        this._localStreams = [];\n      }\n      return this._localStreams;\n    };\n  }\n  if (!('addStream' in window.RTCPeerConnection.prototype)) {\n    var _addTrack = window.RTCPeerConnection.prototype.addTrack;\n    window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n      var _this = this;\n      if (!this._localStreams) {\n        this._localStreams = [];\n      }\n      if (!this._localStreams.includes(stream)) {\n        this._localStreams.push(stream);\n      }\n      // Try to emulate Chrome's behaviour of adding in audio-video order.\n      // Safari orders by track id.\n      stream.getAudioTracks().forEach(function (track) {\n        return _addTrack.call(_this, track, stream);\n      });\n      stream.getVideoTracks().forEach(function (track) {\n        return _addTrack.call(_this, track, stream);\n      });\n    };\n    window.RTCPeerConnection.prototype.addTrack = function addTrack(track) {\n      var _this2 = this;\n      for (var _len = arguments.length, streams = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        streams[_key - 1] = arguments[_key];\n      }\n      if (streams) {\n        streams.forEach(function (stream) {\n          if (!_this2._localStreams) {\n            _this2._localStreams = [stream];\n          } else if (!_this2._localStreams.includes(stream)) {\n            _this2._localStreams.push(stream);\n          }\n        });\n      }\n      return _addTrack.apply(this, arguments);\n    };\n  }\n  if (!('removeStream' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.removeStream = function removeStream(stream) {\n      var _this3 = this;\n      if (!this._localStreams) {\n        this._localStreams = [];\n      }\n      var index = this._localStreams.indexOf(stream);\n      if (index === -1) {\n        return;\n      }\n      this._localStreams.splice(index, 1);\n      var tracks = stream.getTracks();\n      this.getSenders().forEach(function (sender) {\n        if (tracks.includes(sender.track)) {\n          _this3.removeTrack(sender);\n        }\n      });\n    };\n  }\n}\nexport function shimRemoteStreamsAPI(window) {\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  if (!('getRemoteStreams' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.getRemoteStreams = function getRemoteStreams() {\n      return this._remoteStreams ? this._remoteStreams : [];\n    };\n  }\n  if (!('onaddstream' in window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'onaddstream', {\n      get: function get() {\n        return this._onaddstream;\n      },\n      set: function set(f) {\n        var _this4 = this;\n        if (this._onaddstream) {\n          this.removeEventListener('addstream', this._onaddstream);\n          this.removeEventListener('track', this._onaddstreampoly);\n        }\n        this.addEventListener('addstream', this._onaddstream = f);\n        this.addEventListener('track', this._onaddstreampoly = function (e) {\n          e.streams.forEach(function (stream) {\n            if (!_this4._remoteStreams) {\n              _this4._remoteStreams = [];\n            }\n            if (_this4._remoteStreams.includes(stream)) {\n              return;\n            }\n            _this4._remoteStreams.push(stream);\n            var event = new Event('addstream');\n            event.stream = stream;\n            _this4.dispatchEvent(event);\n          });\n        });\n      }\n    });\n    var origSetRemoteDescription = window.RTCPeerConnection.prototype.setRemoteDescription;\n    window.RTCPeerConnection.prototype.setRemoteDescription = function setRemoteDescription() {\n      var pc = this;\n      if (!this._onaddstreampoly) {\n        this.addEventListener('track', this._onaddstreampoly = function (e) {\n          e.streams.forEach(function (stream) {\n            if (!pc._remoteStreams) {\n              pc._remoteStreams = [];\n            }\n            if (pc._remoteStreams.indexOf(stream) >= 0) {\n              return;\n            }\n            pc._remoteStreams.push(stream);\n            var event = new Event('addstream');\n            event.stream = stream;\n            pc.dispatchEvent(event);\n          });\n        });\n      }\n      return origSetRemoteDescription.apply(pc, arguments);\n    };\n  }\n}\nexport function shimCallbacksAPI(window) {\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  var prototype = window.RTCPeerConnection.prototype;\n  var origCreateOffer = prototype.createOffer;\n  var origCreateAnswer = prototype.createAnswer;\n  var setLocalDescription = prototype.setLocalDescription;\n  var setRemoteDescription = prototype.setRemoteDescription;\n  var addIceCandidate = prototype.addIceCandidate;\n  prototype.createOffer = function createOffer(successCallback, failureCallback) {\n    var options = arguments.length >= 2 ? arguments[2] : arguments[0];\n    var promise = origCreateOffer.apply(this, [options]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.createAnswer = function createAnswer(successCallback, failureCallback) {\n    var options = arguments.length >= 2 ? arguments[2] : arguments[0];\n    var promise = origCreateAnswer.apply(this, [options]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  var withCallback = function withCallback(description, successCallback, failureCallback) {\n    var promise = setLocalDescription.apply(this, [description]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.setLocalDescription = withCallback;\n  withCallback = function withCallback(description, successCallback, failureCallback) {\n    var promise = setRemoteDescription.apply(this, [description]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.setRemoteDescription = withCallback;\n  withCallback = function withCallback(candidate, successCallback, failureCallback) {\n    var promise = addIceCandidate.apply(this, [candidate]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.addIceCandidate = withCallback;\n}\nexport function shimGetUserMedia(window) {\n  var navigator = window && window.navigator;\n  if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n    // shim not needed in Safari 12.1\n    var mediaDevices = navigator.mediaDevices;\n    var _getUserMedia = mediaDevices.getUserMedia.bind(mediaDevices);\n    navigator.mediaDevices.getUserMedia = function (constraints) {\n      return _getUserMedia(shimConstraints(constraints));\n    };\n  }\n  if (!navigator.getUserMedia && navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n    navigator.getUserMedia = function getUserMedia(constraints, cb, errcb) {\n      navigator.mediaDevices.getUserMedia(constraints).then(cb, errcb);\n    }.bind(navigator);\n  }\n}\nexport function shimConstraints(constraints) {\n  if (constraints && constraints.video !== undefined) {\n    return Object.assign({}, constraints, {\n      video: utils.compactObject(constraints.video)\n    });\n  }\n  return constraints;\n}\nexport function shimRTCIceServerUrls(window) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  // migrate from non-spec RTCIceServer.url to RTCIceServer.urls\n  var OrigPeerConnection = window.RTCPeerConnection;\n  window.RTCPeerConnection = function RTCPeerConnection(pcConfig, pcConstraints) {\n    if (pcConfig && pcConfig.iceServers) {\n      var newIceServers = [];\n      for (var i = 0; i < pcConfig.iceServers.length; i++) {\n        var server = pcConfig.iceServers[i];\n        if (!server.hasOwnProperty('urls') && server.hasOwnProperty('url')) {\n          utils.deprecated('RTCIceServer.url', 'RTCIceServer.urls');\n          server = JSON.parse(JSON.stringify(server));\n          server.urls = server.url;\n          delete server.url;\n          newIceServers.push(server);\n        } else {\n          newIceServers.push(pcConfig.iceServers[i]);\n        }\n      }\n      pcConfig.iceServers = newIceServers;\n    }\n    return new OrigPeerConnection(pcConfig, pcConstraints);\n  };\n  window.RTCPeerConnection.prototype = OrigPeerConnection.prototype;\n  // wrap static methods. Currently just generateCertificate.\n  if ('generateCertificate' in OrigPeerConnection) {\n    Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n      get: function get() {\n        return OrigPeerConnection.generateCertificate;\n      }\n    });\n  }\n}\nexport function shimTrackEventTransceiver(window) {\n  // Add event.transceiver member over deprecated event.receiver\n  if (typeof window === 'object' && window.RTCTrackEvent && 'receiver' in window.RTCTrackEvent.prototype && !('transceiver' in window.RTCTrackEvent.prototype)) {\n    Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n      get: function get() {\n        return {\n          receiver: this.receiver\n        };\n      }\n    });\n  }\n}\nexport function shimCreateOfferLegacy(window) {\n  var origCreateOffer = window.RTCPeerConnection.prototype.createOffer;\n  window.RTCPeerConnection.prototype.createOffer = function createOffer(offerOptions) {\n    if (offerOptions) {\n      if (typeof offerOptions.offerToReceiveAudio !== 'undefined') {\n        // support bit values\n        offerOptions.offerToReceiveAudio = !!offerOptions.offerToReceiveAudio;\n      }\n      var audioTransceiver = this.getTransceivers().find(function (transceiver) {\n        return transceiver.receiver.track.kind === 'audio';\n      });\n      if (offerOptions.offerToReceiveAudio === false && audioTransceiver) {\n        if (audioTransceiver.direction === 'sendrecv') {\n          if (audioTransceiver.setDirection) {\n            audioTransceiver.setDirection('sendonly');\n          } else {\n            audioTransceiver.direction = 'sendonly';\n          }\n        } else if (audioTransceiver.direction === 'recvonly') {\n          if (audioTransceiver.setDirection) {\n            audioTransceiver.setDirection('inactive');\n          } else {\n            audioTransceiver.direction = 'inactive';\n          }\n        }\n      } else if (offerOptions.offerToReceiveAudio === true && !audioTransceiver) {\n        this.addTransceiver('audio', {\n          direction: 'recvonly'\n        });\n      }\n      if (typeof offerOptions.offerToReceiveVideo !== 'undefined') {\n        // support bit values\n        offerOptions.offerToReceiveVideo = !!offerOptions.offerToReceiveVideo;\n      }\n      var videoTransceiver = this.getTransceivers().find(function (transceiver) {\n        return transceiver.receiver.track.kind === 'video';\n      });\n      if (offerOptions.offerToReceiveVideo === false && videoTransceiver) {\n        if (videoTransceiver.direction === 'sendrecv') {\n          if (videoTransceiver.setDirection) {\n            videoTransceiver.setDirection('sendonly');\n          } else {\n            videoTransceiver.direction = 'sendonly';\n          }\n        } else if (videoTransceiver.direction === 'recvonly') {\n          if (videoTransceiver.setDirection) {\n            videoTransceiver.setDirection('inactive');\n          } else {\n            videoTransceiver.direction = 'inactive';\n          }\n        }\n      } else if (offerOptions.offerToReceiveVideo === true && !videoTransceiver) {\n        this.addTransceiver('video', {\n          direction: 'recvonly'\n        });\n      }\n    }\n    return origCreateOffer.apply(this, arguments);\n  };\n}\nexport function shimAudioContext(window) {\n  if (typeof window !== 'object' || window.AudioContext) {\n    return;\n  }\n  window.AudioContext = window.webkitAudioContext;\n}","map":{"version":3,"names":["utils","shimLocalStreamsAPI","window","RTCPeerConnection","prototype","getLocalStreams","_localStreams","_addTrack","addTrack","addStream","stream","includes","push","getAudioTracks","forEach","track","call","getVideoTracks","streams","apply","arguments","removeStream","index","indexOf","splice","tracks","getTracks","getSenders","sender","removeTrack","shimRemoteStreamsAPI","getRemoteStreams","_remoteStreams","Object","defineProperty","get","_onaddstream","set","f","removeEventListener","_onaddstreampoly","addEventListener","e","event","Event","dispatchEvent","origSetRemoteDescription","setRemoteDescription","pc","shimCallbacksAPI","origCreateOffer","createOffer","origCreateAnswer","createAnswer","setLocalDescription","addIceCandidate","successCallback","failureCallback","options","length","promise","then","Promise","resolve","withCallback","description","candidate","shimGetUserMedia","navigator","mediaDevices","getUserMedia","_getUserMedia","bind","constraints","shimConstraints","cb","errcb","video","undefined","assign","compactObject","shimRTCIceServerUrls","OrigPeerConnection","pcConfig","pcConstraints","iceServers","newIceServers","i","server","hasOwnProperty","deprecated","JSON","parse","stringify","urls","url","generateCertificate","shimTrackEventTransceiver","RTCTrackEvent","receiver","shimCreateOfferLegacy","offerOptions","offerToReceiveAudio","audioTransceiver","getTransceivers","find","transceiver","kind","direction","setDirection","addTransceiver","offerToReceiveVideo","videoTransceiver","shimAudioContext","AudioContext","webkitAudioContext"],"sources":["C:/Users/cnsi-3f-1/Desktop/React/rtsp_to_web/node_modules/webrtc-adapter/src/js/safari/safari_shim.js"],"sourcesContent":["/*\r\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\r\n *\r\n *  Use of this source code is governed by a BSD-style license\r\n *  that can be found in the LICENSE file in the root of the source\r\n *  tree.\r\n */\r\n'use strict';\r\nimport * as utils from '../utils';\r\n\r\nexport function shimLocalStreamsAPI(window) {\r\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\r\n    return;\r\n  }\r\n  if (!('getLocalStreams' in window.RTCPeerConnection.prototype)) {\r\n    window.RTCPeerConnection.prototype.getLocalStreams =\r\n      function getLocalStreams() {\r\n        if (!this._localStreams) {\r\n          this._localStreams = [];\r\n        }\r\n        return this._localStreams;\r\n      };\r\n  }\r\n  if (!('addStream' in window.RTCPeerConnection.prototype)) {\r\n    const _addTrack = window.RTCPeerConnection.prototype.addTrack;\r\n    window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\r\n      if (!this._localStreams) {\r\n        this._localStreams = [];\r\n      }\r\n      if (!this._localStreams.includes(stream)) {\r\n        this._localStreams.push(stream);\r\n      }\r\n      // Try to emulate Chrome's behaviour of adding in audio-video order.\r\n      // Safari orders by track id.\r\n      stream.getAudioTracks().forEach(track => _addTrack.call(this, track,\r\n        stream));\r\n      stream.getVideoTracks().forEach(track => _addTrack.call(this, track,\r\n        stream));\r\n    };\r\n\r\n    window.RTCPeerConnection.prototype.addTrack =\r\n      function addTrack(track, ...streams) {\r\n        if (streams) {\r\n          streams.forEach((stream) => {\r\n            if (!this._localStreams) {\r\n              this._localStreams = [stream];\r\n            } else if (!this._localStreams.includes(stream)) {\r\n              this._localStreams.push(stream);\r\n            }\r\n          });\r\n        }\r\n        return _addTrack.apply(this, arguments);\r\n      };\r\n  }\r\n  if (!('removeStream' in window.RTCPeerConnection.prototype)) {\r\n    window.RTCPeerConnection.prototype.removeStream =\r\n      function removeStream(stream) {\r\n        if (!this._localStreams) {\r\n          this._localStreams = [];\r\n        }\r\n        const index = this._localStreams.indexOf(stream);\r\n        if (index === -1) {\r\n          return;\r\n        }\r\n        this._localStreams.splice(index, 1);\r\n        const tracks = stream.getTracks();\r\n        this.getSenders().forEach(sender => {\r\n          if (tracks.includes(sender.track)) {\r\n            this.removeTrack(sender);\r\n          }\r\n        });\r\n      };\r\n  }\r\n}\r\n\r\nexport function shimRemoteStreamsAPI(window) {\r\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\r\n    return;\r\n  }\r\n  if (!('getRemoteStreams' in window.RTCPeerConnection.prototype)) {\r\n    window.RTCPeerConnection.prototype.getRemoteStreams =\r\n      function getRemoteStreams() {\r\n        return this._remoteStreams ? this._remoteStreams : [];\r\n      };\r\n  }\r\n  if (!('onaddstream' in window.RTCPeerConnection.prototype)) {\r\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'onaddstream', {\r\n      get() {\r\n        return this._onaddstream;\r\n      },\r\n      set(f) {\r\n        if (this._onaddstream) {\r\n          this.removeEventListener('addstream', this._onaddstream);\r\n          this.removeEventListener('track', this._onaddstreampoly);\r\n        }\r\n        this.addEventListener('addstream', this._onaddstream = f);\r\n        this.addEventListener('track', this._onaddstreampoly = (e) => {\r\n          e.streams.forEach(stream => {\r\n            if (!this._remoteStreams) {\r\n              this._remoteStreams = [];\r\n            }\r\n            if (this._remoteStreams.includes(stream)) {\r\n              return;\r\n            }\r\n            this._remoteStreams.push(stream);\r\n            const event = new Event('addstream');\r\n            event.stream = stream;\r\n            this.dispatchEvent(event);\r\n          });\r\n        });\r\n      }\r\n    });\r\n    const origSetRemoteDescription =\r\n      window.RTCPeerConnection.prototype.setRemoteDescription;\r\n    window.RTCPeerConnection.prototype.setRemoteDescription =\r\n      function setRemoteDescription() {\r\n        const pc = this;\r\n        if (!this._onaddstreampoly) {\r\n          this.addEventListener('track', this._onaddstreampoly = function(e) {\r\n            e.streams.forEach(stream => {\r\n              if (!pc._remoteStreams) {\r\n                pc._remoteStreams = [];\r\n              }\r\n              if (pc._remoteStreams.indexOf(stream) >= 0) {\r\n                return;\r\n              }\r\n              pc._remoteStreams.push(stream);\r\n              const event = new Event('addstream');\r\n              event.stream = stream;\r\n              pc.dispatchEvent(event);\r\n            });\r\n          });\r\n        }\r\n        return origSetRemoteDescription.apply(pc, arguments);\r\n      };\r\n  }\r\n}\r\n\r\nexport function shimCallbacksAPI(window) {\r\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\r\n    return;\r\n  }\r\n  const prototype = window.RTCPeerConnection.prototype;\r\n  const origCreateOffer = prototype.createOffer;\r\n  const origCreateAnswer = prototype.createAnswer;\r\n  const setLocalDescription = prototype.setLocalDescription;\r\n  const setRemoteDescription = prototype.setRemoteDescription;\r\n  const addIceCandidate = prototype.addIceCandidate;\r\n\r\n  prototype.createOffer =\r\n    function createOffer(successCallback, failureCallback) {\r\n      const options = (arguments.length >= 2) ? arguments[2] : arguments[0];\r\n      const promise = origCreateOffer.apply(this, [options]);\r\n      if (!failureCallback) {\r\n        return promise;\r\n      }\r\n      promise.then(successCallback, failureCallback);\r\n      return Promise.resolve();\r\n    };\r\n\r\n  prototype.createAnswer =\r\n    function createAnswer(successCallback, failureCallback) {\r\n      const options = (arguments.length >= 2) ? arguments[2] : arguments[0];\r\n      const promise = origCreateAnswer.apply(this, [options]);\r\n      if (!failureCallback) {\r\n        return promise;\r\n      }\r\n      promise.then(successCallback, failureCallback);\r\n      return Promise.resolve();\r\n    };\r\n\r\n  let withCallback = function(description, successCallback, failureCallback) {\r\n    const promise = setLocalDescription.apply(this, [description]);\r\n    if (!failureCallback) {\r\n      return promise;\r\n    }\r\n    promise.then(successCallback, failureCallback);\r\n    return Promise.resolve();\r\n  };\r\n  prototype.setLocalDescription = withCallback;\r\n\r\n  withCallback = function(description, successCallback, failureCallback) {\r\n    const promise = setRemoteDescription.apply(this, [description]);\r\n    if (!failureCallback) {\r\n      return promise;\r\n    }\r\n    promise.then(successCallback, failureCallback);\r\n    return Promise.resolve();\r\n  };\r\n  prototype.setRemoteDescription = withCallback;\r\n\r\n  withCallback = function(candidate, successCallback, failureCallback) {\r\n    const promise = addIceCandidate.apply(this, [candidate]);\r\n    if (!failureCallback) {\r\n      return promise;\r\n    }\r\n    promise.then(successCallback, failureCallback);\r\n    return Promise.resolve();\r\n  };\r\n  prototype.addIceCandidate = withCallback;\r\n}\r\n\r\nexport function shimGetUserMedia(window) {\r\n  const navigator = window && window.navigator;\r\n\r\n  if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\r\n    // shim not needed in Safari 12.1\r\n    const mediaDevices = navigator.mediaDevices;\r\n    const _getUserMedia = mediaDevices.getUserMedia.bind(mediaDevices);\r\n    navigator.mediaDevices.getUserMedia = (constraints) => {\r\n      return _getUserMedia(shimConstraints(constraints));\r\n    };\r\n  }\r\n\r\n  if (!navigator.getUserMedia && navigator.mediaDevices &&\r\n    navigator.mediaDevices.getUserMedia) {\r\n    navigator.getUserMedia = function getUserMedia(constraints, cb, errcb) {\r\n      navigator.mediaDevices.getUserMedia(constraints)\r\n      .then(cb, errcb);\r\n    }.bind(navigator);\r\n  }\r\n}\r\n\r\nexport function shimConstraints(constraints) {\r\n  if (constraints && constraints.video !== undefined) {\r\n    return Object.assign({},\r\n      constraints,\r\n      {video: utils.compactObject(constraints.video)}\r\n    );\r\n  }\r\n\r\n  return constraints;\r\n}\r\n\r\nexport function shimRTCIceServerUrls(window) {\r\n  if (!window.RTCPeerConnection) {\r\n    return;\r\n  }\r\n  // migrate from non-spec RTCIceServer.url to RTCIceServer.urls\r\n  const OrigPeerConnection = window.RTCPeerConnection;\r\n  window.RTCPeerConnection =\r\n    function RTCPeerConnection(pcConfig, pcConstraints) {\r\n      if (pcConfig && pcConfig.iceServers) {\r\n        const newIceServers = [];\r\n        for (let i = 0; i < pcConfig.iceServers.length; i++) {\r\n          let server = pcConfig.iceServers[i];\r\n          if (!server.hasOwnProperty('urls') &&\r\n              server.hasOwnProperty('url')) {\r\n            utils.deprecated('RTCIceServer.url', 'RTCIceServer.urls');\r\n            server = JSON.parse(JSON.stringify(server));\r\n            server.urls = server.url;\r\n            delete server.url;\r\n            newIceServers.push(server);\r\n          } else {\r\n            newIceServers.push(pcConfig.iceServers[i]);\r\n          }\r\n        }\r\n        pcConfig.iceServers = newIceServers;\r\n      }\r\n      return new OrigPeerConnection(pcConfig, pcConstraints);\r\n    };\r\n  window.RTCPeerConnection.prototype = OrigPeerConnection.prototype;\r\n  // wrap static methods. Currently just generateCertificate.\r\n  if ('generateCertificate' in OrigPeerConnection) {\r\n    Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\r\n      get() {\r\n        return OrigPeerConnection.generateCertificate;\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nexport function shimTrackEventTransceiver(window) {\r\n  // Add event.transceiver member over deprecated event.receiver\r\n  if (typeof window === 'object' && window.RTCTrackEvent &&\r\n      'receiver' in window.RTCTrackEvent.prototype &&\r\n      !('transceiver' in window.RTCTrackEvent.prototype)) {\r\n    Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\r\n      get() {\r\n        return {receiver: this.receiver};\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nexport function shimCreateOfferLegacy(window) {\r\n  const origCreateOffer = window.RTCPeerConnection.prototype.createOffer;\r\n  window.RTCPeerConnection.prototype.createOffer =\r\n    function createOffer(offerOptions) {\r\n      if (offerOptions) {\r\n        if (typeof offerOptions.offerToReceiveAudio !== 'undefined') {\r\n          // support bit values\r\n          offerOptions.offerToReceiveAudio =\r\n            !!offerOptions.offerToReceiveAudio;\r\n        }\r\n        const audioTransceiver = this.getTransceivers().find(transceiver =>\r\n          transceiver.receiver.track.kind === 'audio');\r\n        if (offerOptions.offerToReceiveAudio === false && audioTransceiver) {\r\n          if (audioTransceiver.direction === 'sendrecv') {\r\n            if (audioTransceiver.setDirection) {\r\n              audioTransceiver.setDirection('sendonly');\r\n            } else {\r\n              audioTransceiver.direction = 'sendonly';\r\n            }\r\n          } else if (audioTransceiver.direction === 'recvonly') {\r\n            if (audioTransceiver.setDirection) {\r\n              audioTransceiver.setDirection('inactive');\r\n            } else {\r\n              audioTransceiver.direction = 'inactive';\r\n            }\r\n          }\r\n        } else if (offerOptions.offerToReceiveAudio === true &&\r\n            !audioTransceiver) {\r\n          this.addTransceiver('audio', {direction: 'recvonly'});\r\n        }\r\n\r\n        if (typeof offerOptions.offerToReceiveVideo !== 'undefined') {\r\n          // support bit values\r\n          offerOptions.offerToReceiveVideo =\r\n            !!offerOptions.offerToReceiveVideo;\r\n        }\r\n        const videoTransceiver = this.getTransceivers().find(transceiver =>\r\n          transceiver.receiver.track.kind === 'video');\r\n        if (offerOptions.offerToReceiveVideo === false && videoTransceiver) {\r\n          if (videoTransceiver.direction === 'sendrecv') {\r\n            if (videoTransceiver.setDirection) {\r\n              videoTransceiver.setDirection('sendonly');\r\n            } else {\r\n              videoTransceiver.direction = 'sendonly';\r\n            }\r\n          } else if (videoTransceiver.direction === 'recvonly') {\r\n            if (videoTransceiver.setDirection) {\r\n              videoTransceiver.setDirection('inactive');\r\n            } else {\r\n              videoTransceiver.direction = 'inactive';\r\n            }\r\n          }\r\n        } else if (offerOptions.offerToReceiveVideo === true &&\r\n            !videoTransceiver) {\r\n          this.addTransceiver('video', {direction: 'recvonly'});\r\n        }\r\n      }\r\n      return origCreateOffer.apply(this, arguments);\r\n    };\r\n}\r\n\r\nexport function shimAudioContext(window) {\r\n  if (typeof window !== 'object' || window.AudioContext) {\r\n    return;\r\n  }\r\n  window.AudioContext = window.webkitAudioContext;\r\n}\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}